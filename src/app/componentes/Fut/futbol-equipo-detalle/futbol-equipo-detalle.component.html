<app-navbar></app-navbar>

<div class="d-flex">
  <app-sidebar-futbol></app-sidebar-futbol>

  <main class="flex-grow-1 p-4">
    <div class="container">

      <button class="btn btn-outline-secondary mb-4" (click)="goBack()">
        ← Volver atrás
      </button>

      <!-- Equipo + Estadio -->
      <div class="row g-4 mb-5">
        <!-- Equipo -->
        <div class="col-12 col-lg-6">
          <div class="card h-100 shadow-sm">
            <div class="card-body text-center">
              <img [src]="equipo.logo" class="rounded-circle mb-3" width="100" height="100" alt="{{ equipo.name }}">
              <h2 class="card-title">{{ equipo.name }}
                <span *ngIf="equipo.code" class="badge bg-light text-dark ms-2">{{ equipo.code }}</span>
              </h2>
              <ul class="list-group list-group-flush text-start mt-4">
                <li class="list-group-item"><strong>País:</strong> {{ equipo.country }}</li>
                <li class="list-group-item"><strong>Fundado:</strong> {{ equipo.founded }}</li>
                <li class="list-group-item"><strong>Tipo:</strong> {{ equipo.national ? 'Nacional' : 'Internacional' }}</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Estadio -->
        <div class="col-12 col-lg-6">
          <div class="card h-100 shadow-sm">
            <div class="card-header bg-secondary text-white">
              <h5 class="mb-0">Estadio</h5>
            </div>
            <div class="card-body">
              <ng-container *ngIf="venue; else noVenueTpl">
                <ul class="list-group list-group-flush">
                  <li class="list-group-item"><strong>Nombre:</strong> {{ venue.name }}</li>
                  <li class="list-group-item"><strong>Ciudad:</strong> {{ venue.city }}</li>
                  <li class="list-group-item"><strong>Dirección:</strong> {{ venue.address }}</li>
                  <li class="list-group-item"><strong>Capacidad:</strong> {{ venue.capacity | number }}</li>
                  <li class="list-group-item"><strong>Superficie:</strong> {{ venue.surface }}</li>
                </ul>
                <img *ngIf="venue.image" [src]="venue.image" class="img-fluid rounded mt-3" alt="Imagen Estadio">
              </ng-container>
              <ng-template #noVenueTpl>
                <p class="text-muted mb-0">Información del estadio no disponible.</p>
              </ng-template>
            </div>
          </div>
        </div>
      </div>

       <!-- Pestañas -->
          <ul class="nav nav-pills mb-3 justify-content-center" role="tablist">
            <li class="nav-item">
              <button class="nav-link active" data-bs-toggle="pill" data-bs-target="#statsTab">
                Estadísticas
              </button>
            </li>
          </ul>

          <!-- Estadísticas -->
          <div class="tab-content">
            <div class="tab-pane fade show active" id="statsTab">
              <div class="card shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                  <h5 class="mb-0">Estadísticas</h5>
                </div>
                <div class="card-body">
                  <!-- Debug: muestra el JSON completo -->
                  <pre *ngIf="stats" class="bg-light p-2 mb-3">{{ stats | json }}</pre>

                  <ng-container *ngIf="stats; else noStatsTpl">
                    <div class="row text-center gy-3">
                      <div class="col-6 col-md-4" *ngIf="stats.fixtures?.played?.total !== undefined">
                        <h6>Jugados</h6>
                        <p class="fs-4 mb-0">{{ stats.fixtures.played.total }}</p>
                      </div>
                      <div class="col-6 col-md-4" *ngIf="stats.fixtures?.wins?.total !== undefined">
                        <h6>Ganados</h6>
                        <p class="fs-4 mb-0">{{ stats.fixtures.wins.total }}</p>
                      </div>
                      <div class="col-6 col-md-4" *ngIf="stats.fixtures?.draws?.total !== undefined">
                        <h6>Empates</h6>
                        <p class="fs-4 mb-0">{{ stats.fixtures.draws.total }}</p>
                      </div>
                      <div class="col-6 col-md-4" *ngIf="stats.fixtures?.loses?.total !== undefined">
                        <h6>Perdidos</h6>
                        <p class="fs-4 mb-0">{{ stats.fixtures.loses.total }}</p>
                      </div>
                      <div class="col-6 col-md-4" *ngIf="stats.goals?.for?.total !== undefined">
                        <h6>Goles a favor</h6>
                        <p class="fs-4 mb-0">{{ stats.goals.for.total }}</p>
                      </div>
                      <div class="col-6 col-md-4" *ngIf="stats.goals?.against?.total !== undefined">
                        <h6>Goles en contra</h6>
                        <p class="fs-4 mb-0">{{ stats.goals.against.total }}</p>
                      </div>
                    </div>
                  </ng-container>
                  <ng-template #noStatsTpl>
                    <p class="text-muted mb-0">No hay estadísticas disponibles.</p>
                  </ng-template>
                </div>
              </div>
            </div>
          </div>

        <!-- Plantilla -->
        <div class="tab-pane fade" id="players" role="tabpanel" aria-labelledby="players-tab">
          <div class="card shadow-sm">
            <div class="card-body">
              <ng-container *ngIf="players.length; else noPlayersTpl">
                <div class="table-responsive">
                  <table class="table table-hover align-middle mb-0">
                    <thead class="table-light">
                      <tr>
                        <th>Foto</th>
                        <th>Nombre</th>
                        <th>Edad</th>
                        <th>Posición</th>
                        <th>Nacionalidad</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let p of players">
                        <td><img [src]="p.photo" width="32" height="32" class="rounded-circle"></td>
                        <td>{{ p.name }}</td>
                        <td>{{ p.age }}</td>
                        <td>{{ p.position }}</td>
                        <td>{{ p.nationality }}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </ng-container>
              <ng-template #noPlayersTpl>
                <p class="text-muted mb-0">No hay jugadores disponibles.</p>
              </ng-template>
            </div>
          </div>
        </div>
      </div>
  </main>
</div>

<app-footer></app-footer>
